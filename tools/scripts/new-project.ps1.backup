# new-project.ps1
# æ¯æ—¥ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
# ä½¿ç”¨æ–¹æ³•: .\new-project.ps1 <day_number> <project_name>

param(
    [Parameter(Mandatory=$true)]
    [int]$DayNumber,
    
    [Parameter(Mandatory=$true)]
    [string]$ProjectName
)

Write-Host "`nğŸš€ Creating Day $DayNumber Project: $ProjectName" -ForegroundColor Cyan

# Weekç•ªå·ã‚’è¨ˆç®—
$weekNumber = [Math]::Ceiling($DayNumber / 7)
$dayFormatted = $DayNumber.ToString("000")
$weekFormatted = $weekNumber.ToString("00")

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¹
$projectPath = "projects/week-$weekFormatted/day-$dayFormatted-$ProjectName"

Write-Host "ğŸ“ Creating project structure..." -ForegroundColor Yellow

# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
$dirs = @(
    "$projectPath/src/frontend",
    "$projectPath/src/backend",
    "$projectPath/src/infrastructure",
    "$projectPath/tests",
    "$projectPath/docs"
)

foreach ($dir in $dirs) {
    New-Item -ItemType Directory -Force -Path $dir | Out-Null
    Write-Host "  âœ“ $dir" -ForegroundColor Gray
}

# README.md ã‚’ä½œæˆ
$readmeContent = @"
# Day $DayNumber : $ProjectName

## æ¦‚è¦
[ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®èª¬æ˜ã‚’ã“ã“ã«è¨˜è¼‰]

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- Frontend: HTML/CSS/JavaScript
- Backend: Node.js
- AWS Services: [ä½¿ç”¨ã™ã‚‹AWSã‚µãƒ¼ãƒ“ã‚¹ã‚’è¨˜è¼‰]

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
``````bash
npm install
npm run dev
``````

## ãƒ‡ãƒ—ãƒ­ã‚¤
``````bash
npm run deploy
``````

## å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ
- [ ] å­¦ç¿’é …ç›®1
- [ ] å­¦ç¿’é …ç›®2
- [ ] å­¦ç¿’é …ç›®3

## å‚è€ƒãƒªãƒ³ã‚¯
- [å‚è€ƒãƒªãƒ³ã‚¯ã‚’è¿½åŠ ]

---
Created: $(Get-Date -Format "yyyy-MM-dd HH:mm")
Week: $weekNumber
"@

Set-Content -Path "$projectPath/README.md" -Value $readmeContent -Encoding UTF8

# package.json ã‚’ä½œæˆ
$packageJson = @"
{
  "name": "day-$dayFormatted-$ProjectName",
  "version": "1.0.0",
  "description": "Day $DayNumber : $ProjectName",
  "scripts": {
    "dev": "echo 'Start development server'",
    "build": "echo 'Build project'",
    "test": "echo 'Run tests'",
    "deploy": "echo 'Deploy to AWS'"
  },
  "author": "",
  "license": "MIT"
}
"@

Set-Content -Path "$projectPath/package.json" -Value $packageJson -Encoding UTF8

# index.html ã‚’ä½œæˆ
$indexHtml = @"
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day $DayNumber - $ProjectName</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Day $DayNumber : $ProjectName</h1>
    <p>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹å§‹ã—ã¾ã—ã‚‡ã†ï¼</p>
    <script src="script.js"></script>
</body>
</html>
"@

Set-Content -Path "$projectPath/src/frontend/index.html" -Value $indexHtml -Encoding UTF8

# style.css ã‚’ä½œæˆ
$cssContent = @"
/* Day $DayNumber - $ProjectName */
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 20px;
    background-color: #f5f5f5;
}

h1 {
    color: #333;
    border-bottom: 2px solid #007bff;
    padding-bottom: 10px;
}
"@

Set-Content -Path "$projectPath/src/frontend/style.css" -Value $cssContent -Encoding UTF8

# script.js ã‚’ä½œæˆ
$jsContent = @"
// Day $DayNumber - $ProjectName
console.log('Project started!');
console.log('Day: $DayNumber');
console.log('Project: $ProjectName');
"@

Set-Content -Path "$projectPath/src/frontend/script.js" -Value $jsContent -Encoding UTF8

Write-Host "`nâœ… Project created successfully!" -ForegroundColor Green
Write-Host "`nğŸ“ Project location: $projectPath" -ForegroundColor Cyan
Write-Host "`nğŸ“ Next steps:" -ForegroundColor Yellow
Write-Host "  1. cd $projectPath" -ForegroundColor Gray
Write-Host "  2. Update README.md with project details" -ForegroundColor Gray
Write-Host "  3. Start coding!" -ForegroundColor Gray
Write-Host "  4. Commit your changes" -ForegroundColor Gray

# é€²æ—ãƒ­ã‚°ã«è¿½è¨˜
$logEntry = "`n## Day $DayNumber ($(Get-Date -Format 'yyyy-MM-dd'))`n- Project: $ProjectName`n- Status: Started`n"
Add-Content -Path "progress/daily-log.md" -Value $logEntry -Encoding UTF8
Write-Host "`nğŸ“Š Progress logged to daily-log.md" -ForegroundColor Green